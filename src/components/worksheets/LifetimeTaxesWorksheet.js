// src/components/worksheets/LifetimeTaxesWorksheet.tsx
"use client";
import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { Card } from "../catalyst/card/Card";
import LifetimeTaxesChart from "../../charts/LifetimeTaxesChart";
import { formatCurrency } from "../../utils";
export default function LifetimeTaxesWorksheet({ projection, chartData, domain, }) {
    const { strategyYears, traditionalLifetimeTax, rothStrategyLifetimeTax, lifetimeSavings, } = projection;
    const years = strategyYears; // or baselineYears depending on intent
    const firstYear = years?.[0] ?? null;
    const lastYear = years?.[years.length - 1] ?? null;
    const peakRmdYear = years && years.length > 0
        ? years.reduce((max, yr) => (yr.rmd > max.rmd ? yr : max), years[0])
        : null;
    const totalIrmaa = years?.reduce((sum, yr) => sum + (yr.irmaaSurchargeAnnual ?? 0), 0) ?? 0;
    const lifetimeReductionPct = traditionalLifetimeTax > 0
        ? ((traditionalLifetimeTax - rothStrategyLifetimeTax) /
            traditionalLifetimeTax) *
            100
        : 0;
    const convertAmount = domain.rothConversionAmount ?? 0;
    return (_jsxs(Card, { className: "space-y-10", children: [_jsxs("section", { className: "text-center space-y-1 mt-2", children: [_jsxs("p", { className: "text-sm text-gray-700", children: ["You can convert", " ", _jsx("span", { className: "font-semibold", children: formatCurrency(convertAmount) }), " ", "and save an estimated"] }), _jsx("div", { className: "text-4xl sm:text-5xl font-extrabold text-blue-600!  mt-1", children: formatCurrency(lifetimeSavings ?? 0) }), _jsx("p", { className: "text-xs text-gray-500 mt-1", children: "in lifetime taxes" })] }), _jsxs("section", { className: "space-y-3", children: [_jsx("h4", { className: "text-base font-semibold", children: "Lifetime Tax Insights" }), _jsxs("ul", { className: "list-disc pl-5 text-sm space-y-1 text-gray-700", children: [_jsxs("li", { children: ["Traditional path total taxes:", " ", _jsx("span", { className: "font-semibold", children: formatCurrency(traditionalLifetimeTax ?? 0) })] }), _jsxs("li", { children: ["Roth strategy total taxes:", " ", _jsx("span", { className: "font-semibold", children: formatCurrency(rothStrategyLifetimeTax ?? 0) })] }), _jsxs("li", { children: ["Estimated lifetime savings:", " ", _jsx("span", { className: "font-semibold text-purple-600", children: formatCurrency(lifetimeSavings ?? 0) })] }), _jsxs("li", { children: ["Savings reduce lifetime tax burden by", " ", _jsxs("span", { className: "font-semibold", children: [lifetimeReductionPct.toFixed(1), "%"] })] }), peakRmdYear && (_jsxs("li", { children: ["Peak RMD at age", " ", _jsx("span", { className: "font-semibold", children: peakRmdYear.age }), " ", "is approximately", " ", _jsx("span", { className: "font-semibold", children: formatCurrency(peakRmdYear.rmd) })] })), totalIrmaa > 0 && (_jsxs("li", { children: ["Total IRMAA surcharges over retirement:", " ", _jsx("span", { className: "font-semibold", children: formatCurrency(totalIrmaa) })] }))] })] }), _jsxs("section", { className: "space-y-3", children: [_jsx("h4", { className: "text-sm font-semibold", children: "Lifetime Taxes (Traditional vs Roth Strategy)" }), _jsx(LifetimeTaxesChart, { data: chartData ?? [] }), _jsx("p", { className: "text-xs text-gray-500", children: "Red = Traditional. Purple = Roth Strategy." })] }), _jsxs("section", { className: "grid grid-cols-1 sm:grid-cols-3 gap-4", children: [_jsxs("div", { className: "rounded border p-3 bg-gray-50 space-y-1", children: [_jsx("p", { className: "text-xs uppercase text-gray-500", children: "Traditional lifetime taxes" }), _jsx("div", { className: "text-lg font-semibold", children: formatCurrency(traditionalLifetimeTax ?? 0) }), firstYear && lastYear && (_jsxs("p", { className: "text-xs text-gray-500", children: [firstYear.year, "\u2013", lastYear.year] }))] }), _jsxs("div", { className: "rounded border p-3 bg-gray-50 space-y-1", children: [_jsx("p", { className: "text-xs uppercase text-gray-500", children: "Roth strategy lifetime taxes" }), _jsx("div", { className: "text-lg font-semibold", children: formatCurrency(rothStrategyLifetimeTax ?? 0) })] }), _jsxs("div", { className: "rounded border p-3 bg-purple-50 border-purple-200 space-y-1", children: [_jsx("p", { className: "text-xs uppercase text-purple-700", children: "Lifetime savings" }), _jsx("div", { className: "text-lg font-semibold text-purple-700", children: formatCurrency(lifetimeSavings ?? 0) })] })] }), _jsxs("section", { className: "rounded border p-4 bg-blue-50", children: [_jsx("h4", { className: "text-sm font-semibold mb-2", children: "What This Means" }), _jsxs("ul", { className: "list-disc pl-4 text-xs space-y-1 text-blue-900", children: [_jsx("li", { children: "Traditional IRA withdrawals (including RMDs) are taxed as ordinary income." }), _jsx("li", { children: "Roth conversions move income into earlier, lower-bracket years." }), _jsx("li", { children: "Roth strategies smooth tax spikes in later RMD years." }), _jsx("li", { children: "Lower RMDs help reduce Medicare IRMAA surcharges." })] })] }), _jsx("section", { children: _jsx("p", { className: "text-[11px] text-gray-400", children: "This simulation is for educational use only and does not constitute tax advice." }) })] }));
}
